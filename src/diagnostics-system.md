# Система Диагностики и Восстановления AXON

## Обзор

Платформа AXON теперь включает комплексную систему диагностики и автоматического восстановления, которая обеспечивает:

1. **Диагностика системных сбоев** - обнаружение и анализ проблем
2. **Поэтапное выполнение задач** - решение проблем малыми командами
3. **Автоматическое восстановление** - самовосстановление системы

## Компоненты Системы

### 1. Модуль Диагностики Системы (SystemDiagnostics)

**Функциональность:**
- Мониторинг системных метрик (память, производительность, хранилище, сеть, безопасность, время работы)
- Автоматическое обнаружение проблем
- Создание микро-задач для исправления
- Возможность ручного запуска диагностики

**Типы проблем:**
- Проблемы управления памятью
- Неисправности модулей ИИ аудита
- Фрагментация данных
- Медленная работа чата

**Автоматические исправления:**
- Очистка кэша
- Оптимизация компонентов
- Перезапуск агентов
- Восстановление соединений

### 2. Поэтапный Исполнитель (StepByStepExecutor)

**Ключевые особенности:**
- Разбиение сложных задач на микро-команды
- Контроль скорости выполнения (медленно/нормально/быстро)
- Автоматические повторы при сбоях
- Подробное логирование выполнения

**Предустановленные микро-команды:**
- Инициализация системы
- Очистка кэша
- Оптимизация памяти
- Резервное копирование данных
- Проверка целостности
- Обновление индексов
- Анализ производительности
- Генерация отчетов

**Типы задач:**
- Обслуживание системы
- Оптимизация данных
- Анализ производительности

### 3. Система Автовосстановления (AutoRecovery)

**Мониторинг компонентов:**
- Менеджер памяти
- Движок базы данных
- Сетевой слой
- ИИ агенты
- Модуль чата
- Слой безопасности

**Возможности:**
- Непрерывный мониторинг здоровья компонентов
- Автоматическое исправление критических проблем
- Настройка авто-ремонта для каждого компонента
- Отчеты о действиях восстановления

## Интеграция с Основной Системой

### Вкладка "Диагностика"

Новая вкладка включает:
1. **Диагностика системы** - сканирование и обнаружение проблем
2. **Автовосстановление** - мониторинг компонентов и автоматический ремонт

### Вкладка "Исполнитель"

Переработана для использования нового компонента StepByStepExecutor:
- Детализированное выполнение задач
- Визуализация прогресса по шагам
- Настройки скорости и повторов
- Логирование выполнения

## Технические Детали

### Типы Данных

```typescript
interface SystemIssue {
  id: string;
  type: 'error' | 'warning' | 'info';
  component: string;
  description: string;
  severity: 'critical' | 'high' | 'medium' | 'low';
  status: 'detected' | 'analyzing' | 'fixing' | 'resolved';
  fixSteps?: string[];
}

interface MicroTask {
  id: string;
  title: string;
  description: string;
  commands: string[];
  status: 'pending' | 'running' | 'completed' | 'failed';
  progress: number;
}

interface SystemComponent {
  id: string;
  name: string;
  status: 'healthy' | 'warning' | 'critical' | 'offline';
  health: number;
  autoRepair: boolean;
  issues: string[];
  repairs: string[];
}
```

### Автоматические Процессы

1. **Мониторинг** - каждые 3-5 секунд
2. **Обнаружение проблем** - при сканировании
3. **Создание задач** - автоматически при обнаружении
4. **Выполнение** - с настраиваемой скоростью
5. **Восстановление** - при критических проблемах

### Настройки

- **Скорость выполнения**: медленно (2x), нормально (1x), быстро (0.5x)
- **Автоматическое восстановление**: включено/выключено
- **Мониторинг**: включен/выключен
- **Авто-повторы**: настраиваемое количество попыток

## Пользовательский Интерфейс

### Индикаторы Состояния

- **Зеленый**: Здоровое состояние (>80%)
- **Желтый**: Предупреждение (60-80%)
- **Оранжевый**: Проблемы (40-60%)
- **Красный**: Критическое состояние (<40%)

### Элементы Управления

- Кнопки запуска/остановки
- Переключатели автоматических режимов
- Прогресс-бары для визуализации
- Логи выполнения в реальном времени

### Уведомления

Система интегрирована с toast-уведомлениями для:
- Обнаружения проблем
- Завершения задач
- Успешного восстановления
- Критических ошибок

## Преимущества

1. **Проактивное обслуживание** - предотвращение серьезных сбоев
2. **Минимальное время простоя** - автоматическое восстановление
3. **Прозрачность** - подробные логи всех операций
4. **Гибкость** - настраиваемые параметры для разных сценариев
5. **Масштабируемость** - легкое добавление новых типов диагностики

## Расширение Системы

Система спроектирована для легкого расширения:

### Добавление новых типов диагностики
```typescript
const newIssueType = {
  type: 'performance',
  component: 'New Component',
  detection: () => { /* логика обнаружения */ },
  repair: () => { /* логика исправления */ }
};
```

### Новые микро-команды
```typescript
const newCommand: MicroCommand = {
  id: 'new-command',
  name: 'New Command',
  description: 'Description',
  estimatedTime: 5,
  execute: async () => { /* выполнение */ }
};
```

### Дополнительные компоненты мониторинга
```typescript
const newComponent: SystemComponent = {
  id: 'new-component',
  name: 'New Component',
  monitor: () => { /* логика мониторинга */ },
  repair: () => { /* логика восстановления */ }
};
```

Эта система обеспечивает надежную работу платформы AXON и минимизирует необходимость ручного вмешательства при возникновении проблем.